{"version":3,"sources":["pages/Login/style.module.scss","api/authentication.ts","helper/index.ts","pages/Login/index.tsx"],"names":["module","exports","login","payload","sendPost","getErrorMessage","error","response","data","errorMessage","Login","history","useHistory","t","useTranslation","handleSubmit","a","params","_","pick","token","refreshToken","Cookies","set","expires","rememberMe","undefined","push","message","destroy","configs","APP_ENV","console","log","get","to","className","styles","loginContainer","bordered","loginForm","onFinish","justify","Item","label","name","rules","required","labelAlign","labelCol","span","wrapperCol","Password","valuePropName","block","type","htmlType","toUpperCase","onClick"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,eAAiB,8BAA8B,UAAY,2B,kQCEhEC,EAAQ,SAACC,GAAD,OAAkBC,YAAS,qBAAsBD,I,iBCSzDE,EAAkB,SAACC,GAAgB,IAAD,IAC7C,OAAY,OAALA,QAAK,IAALA,GAAA,UAAAA,EAAOC,gBAAP,mBAAiBC,YAAjB,eAAuBC,eAAgB,yBCHjC,SAASC,IACtB,IAAMC,EAAUC,cACRC,EAAMC,cAAND,EAGFE,EAAY,uCAAG,WAAOZ,GAAP,uBAAAa,EAAA,6DACbC,EAASC,IAAEC,KAAKhB,EAAS,CAAC,WAAY,aADzB,kBAGED,EAAMe,GAHR,OAGXT,EAHW,SAIeA,EAAKA,KAA7BY,EAJS,EAITA,MAAOC,EAJE,EAIFA,aACfC,IAAQC,IAAI,QAASH,EAAO,CAC1BI,QAASrB,EAAQsB,WAAa,YAASC,IAEzCJ,IAAQC,IAAI,eAAgBF,EAAc,CACxCG,QAASrB,EAAQsB,WAAa,YAASC,IAEzCf,EAAQgB,KAAK,KAXI,kDDZYrB,ECyBV,EAAD,GDxBtBsB,IAAQC,UACRD,IAAQtB,MAAMD,EAAgBC,IACN,SAApBwB,IAAQC,SAEVC,QAAQC,IAAI3B,GCOO,kCDZW,IAACA,ICYZ,qBAAH,sDAkBlB,QAD0BgB,IAAQY,IAAI,SACV,kBAAC,IAAD,CAAUC,GAAG,MAGvC,yBAAKC,UAAWC,IAAOC,gBACrB,kBAAC,IAAD,CAAMC,UAAQ,EAACH,UAAWC,IAAOG,WAC/B,kBAAC,IAAD,CAAMC,SAAU1B,GACd,kBAAC,IAAD,CAAK2B,QAAQ,UACX,4BAAK7B,EAAE,kBAET,kBAAC,IAAK8B,KAAN,CACEC,MAAO/B,EAAE,mBACTgC,KAAK,WACLC,MAAO,CACL,CACEC,UAAU,EACVnB,QAASf,EAAE,+BAGfmC,WAAW,OACXC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEpB,kBAAC,IAAD,OAEF,kBAAC,IAAKP,KAAN,CACEC,MAAO/B,EAAE,mBACTgC,KAAK,WACLC,MAAO,CAAC,CAAEC,UAAU,EAAMnB,QAASf,EAAE,+BACrCmC,WAAW,OACXC,SAAU,CAAEC,KAAM,GAClBC,WAAY,CAAED,KAAM,KAEpB,kBAAC,IAAME,SAAP,OAEF,kBAAC,IAAKT,KAAN,CAAWE,KAAK,aAAaQ,cAAc,WACzC,kBAAC,IAAD,SAAYxC,EAAE,uBAEhB,kBAAC,IAAK8B,KAAN,CAAWM,SAAU,CAAEC,KAAM,KAC3B,kBAAC,IAAD,CAAQI,OAAK,EAACC,KAAK,UAAUC,SAAS,UACnC3C,EAAE,gBAAgB4C,gBAGvB,kBAAC,IAAKd,KAAN,CAAWM,SAAU,CAAEC,KAAM,KAC3B,kBAAC,IAAD,CAAQI,OAAK,EAACC,KAAK,SAASC,SAAS,SAASE,QA9D/B,kBAAM/C,EAAQgB,KAAK,cA+D/Bd,EAAE,iBAAiB4C,gBAGxB,6BACE","file":"static/js/7.3f18f53e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"loginContainer\":\"style_loginContainer__1BWjQ\",\"loginForm\":\"style_loginForm__2ZKe8\"};","import { sendPost } from './axios';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const login = (payload: any) => sendPost('/v1/app/auth/login', payload);\nexport const signUp = (payload: any) => sendPost('/v1/app/auth/signup', payload);\n","import configs from 'config';\nimport { message } from 'antd';\n\nexport const handleErrorMessage = (error: any) => {\n  message.destroy();\n  message.error(getErrorMessage(error));\n  if (configs.APP_ENV !== 'prod') {\n    // tslint:disable-next-line: no-console\n    console.log(error);\n  }\n};\n\nexport const getErrorMessage = (error: any) => {\n  return error?.response?.data?.errorMessage || 'Something went wrong!';\n};\n","import React from 'react';\nimport { Redirect, useHistory } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport _ from 'lodash';\nimport styles from './style.module.scss';\nimport { Card, Input, Button, Form, Row, Checkbox } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { login } from 'api/authentication';\nimport { handleErrorMessage } from 'helper';\n\nexport default function Login() {\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  const navigateToSignUp = () => history.push('/sign-up');\n  const handleSubmit = async (payload: any) => {\n    const params = _.pick(payload, ['username', 'password']);\n    try {\n      const data = await login(params);\n      const { token, refreshToken } = data.data;\n      Cookies.set('token', token, {\n        expires: payload.rememberMe ? 999999 : undefined,\n      });\n      Cookies.set('refreshToken', refreshToken, {\n        expires: payload.rememberMe ? 999999 : undefined,\n      });\n      history.push('/');\n    } catch (error) {\n      handleErrorMessage(error);\n    }\n  };\n\n  const isAuthenticated = !!Cookies.get('token');\n  if (isAuthenticated) return <Redirect to=\"/\" />;\n\n  return (\n    <div className={styles.loginContainer}>\n      <Card bordered className={styles.loginForm}>\n        <Form onFinish={handleSubmit}>\n          <Row justify=\"center\">\n            <h2>{t('common.login')}</h2>\n          </Row>\n          <Form.Item\n            label={t('common.username')}\n            name=\"username\"\n            rules={[\n              {\n                required: true,\n                message: t('validate.usernameRequired'),\n              },\n            ]}\n            labelAlign=\"left\"\n            labelCol={{ span: 8 }}\n            wrapperCol={{ span: 16 }}\n          >\n            <Input />\n          </Form.Item>\n          <Form.Item\n            label={t('common.password')}\n            name=\"password\"\n            rules={[{ required: true, message: t('validate.passwordRequired') }]}\n            labelAlign=\"left\"\n            labelCol={{ span: 8 }}\n            wrapperCol={{ span: 16 }}\n          >\n            <Input.Password />\n          </Form.Item>\n          <Form.Item name=\"rememberMe\" valuePropName=\"checked\">\n            <Checkbox> {t('common.rememberMe')}</Checkbox>\n          </Form.Item>\n          <Form.Item labelCol={{ span: 24 }}>\n            <Button block type=\"primary\" htmlType=\"submit\">\n              {t('common.login').toUpperCase()}\n            </Button>\n          </Form.Item>\n          <Form.Item labelCol={{ span: 24 }}>\n            <Button block type=\"dashed\" htmlType=\"button\" onClick={navigateToSignUp}>\n              {t('common.signUp').toUpperCase()}\n            </Button>\n          </Form.Item>\n          <div>\n            <p>Account: admin / 123456</p>\n          </div>\n        </Form>\n      </Card>\n    </div>\n  );\n}\n"],"sourceRoot":""}